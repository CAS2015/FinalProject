<h4>Comments</h4>
<hr />

<!-- CREATE NEW COMMENT -->
<div *ngIf="username">
  <form class="form-inline">
    <input
      class="form-control"
      type="text"
      placeholder="Add Comment..."
      name="content"
      [(ngModel)]="createComment.content"
    />
    <button class="ml-3 btn btn-primary" type="submit" (click)="create()">
      Add
    </button>
  </form>
  <span style="color:hotpink">^ this adds an "original" comment (inReplyTo===null)</span>
</div>
<hr />

<!-- DISPLAY ALL COMMENTS -->
<table class="table">
  <thead>
    <tr>
      <th style="color:hotpink">Original Comment?</th>
      <th>Content</th>
      <th>Name</th>
      <th>Username</th>
      <th>Buttons</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngFor="let comment of comments">
      <td><span *ngIf="comment['originalComment'] === null">ORIGINAL</span>
        <span *ngIf="comment['originalComment'] !== null ">Reply to: {{comment['originalComment'].content}}</span>
        </td>
      <td>{{ comment["content"] }}</td>
      <td>{{ comment["user"]["firstName"] }}</td>
      <td>{{ comment["user"]["username"] }}</td>

      <!-- SHOW EDIT AND DELETE BUTTONS IF CORRECT USER OR IF ADMIN -->
      <td>
        <div
          *ngIf="username === comment['user']['username'] || role === 'admin'"
        >
          <img
            class="crudIcon"
            (click)="prepareUpdate(comment)"
            src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Edit_icon_%28the_Noun_Project_30184%29.svg/1024px-Edit_icon_%28the_Noun_Project_30184%29.svg.png"
            alt="edit button"
          />
          <img
            class="crudIcon"
            src="https://icons-for-free.com/iconfiles/png/512/delete+remove+trash+trash+bin+trash+can+icon-1320073117929397588.png"
            alt="delete button"
          />
          <!-- <div class="col" *ngIf="commentEdit && i === commentIndex && (username === comment['user']['username'] || role === 'admin')">
                <img class="crudIcon" src="data:image/png;base64,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" alt="save button">
              </div> -->
        </div>
      </td>
    </tr>
  </tbody>
</table>

<!-- response section -->
<!-- <div class="row container responseRow">
      <input class="col" type="text" placeholder="Respond..." name="content" [(ngModel)]="createComment.content">
      <input type="hidden" name="responseIndex" [(ngModel)]="responseIndex">
      <button class="col-1" type="submit" (click)="saveNewComment(createComment, responseIndex)">Add</button>
    </div> -->
<!--
    <div class="row " *ngFor="let response of comment['responses']; let i = index" [attr.data-index]="i">
      <div class="col-1"></div>
      <div class="col responseContent" *ngIf="!responseEdit || i !== responseIndex">{{response['content']}}</div>
      <div class="col resposneContent" *ngIf="responseEdit && i === responseIndex"><input class="formInputText" type="text" value="{{responseEdit['content']}}" [(ngModel)]="responseEdit['content']"></div>
      <div class="col-1 responseUser">{{response['user']['username']}}</div> -->

<!-- response crud operations buttons and functions -->
<!-- <div class="col-1 responseCrud" *ngIf="!responseEdit && (username === response['user']['username'] || role === 'admin')">
          <img class="crudIcon" (click)="editResponse(response,i)" src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/64/Edit_icon_%28the_Noun_Project_30184%29.svg/1024px-Edit_icon_%28the_Noun_Project_30184%29.svg.png" alt="edit button">
          &nbsp;
          <img class="crudIcon" (click)="deleteComment(response['id'])" src="https://icons-for-free.com/iconfiles/png/512/delete+remove+trash+trash+bin+trash+can+icon-1320073117929397588.png" alt="delete button">
        </div>
        <div class="col-1 responseCrud" *ngIf="responseEdit && i=== responseIndex && (username === response['user']['username'] || role === 'admin')">
          <img class="crudIcon" (click)="saveEdit(responseEdit)" src="data:image/png;base64,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" alt="save button">
        </div>
    </div> -->
<!-- </div> -->
<!-- </div> -->

<!--
////////////////// old:
<hr />
<h1>Comment-List Component</h1>
<h2>Welcome to country #{{ this.countryId }}!</h2>
<h2>Comments</h2> -->
<!-- ON LOAD/WHEN UPDATE BUTTON NOT YET PUSHED -->
<!-- <div *ngFor="let comment of this.comments">
  <div *ngIf="this.comment !== updateComment">
    ID: {{ comment.id }} / {{ comment.content }}<br /> -->
<!-- Written by: {{ comment.user.firstName }} {{ comment.user.lastName }} -->
<!-- TODO logic to only show these buttons to this user, or delete button to admin  -->
<!-- <button
        class="btn btn-success btn-sm mr-3"
        (click)="prepareUpdate(comment)"
      >
        Update
      </button>
      <button class="btn btn-danger btn-sm" (click)="delete(comment)">Delete</button>
    <br /><br />
  </div> -->

<!-- WHEN UPDATE BUTTON IS PUSHED -->
<!-- <div *ngIf="this.comment === updateComment">
    <h1>In update comment area</h1>
    ID: {{ updateComment.id }}
    <form>
      <textarea
        class="form-control"
        name="updateCommentContent"
        type="text"
        [(ngModel)]="updateComment.content"
      ></textarea>
      <button class="btn btn-success btn-sm" (click)="confirmUpdate()">
        Submit
      </button>
    </form>
    <br /> -->
<!-- Written by: {{ comment.user.firstName }} {{ comment.user.lastName }} -->
<!-- </div>
</div>
<br />
<h2>Write a Comment</h2>
<form>
  Comment:<br />
  <textarea class="form-control" type="text" name="createContent" [(ngModel)]="createComment.content"></textarea>
  <button class="btn btn-success" (click)="create()">Create</button>
</form>
<div *ngIf="createCommentResult">
  It worked. <br />
  The content is --
  {{ createCommentResult.content }}
  <br />
</div>
<br /><br /> -->

<!-- <form #showForm>
  <input type="text" id="cid" />
  <button (click)="show(showForm)">Submit</button>
</form>
<div *ngIf="showComment">
  {{showComment.id}} {{showComment.content}}
</div-->
